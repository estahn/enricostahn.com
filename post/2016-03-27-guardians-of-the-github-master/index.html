<!doctype html><html lang=en-us><head><title>Guardians of the GitHub master | Enrico Stahn</title><meta charset=utf-8><meta name=language content="en"><meta name=description content><meta name=keywords content><meta name=viewport content="width=device-width,initial-scale=1"><meta charset=utf-8><meta http-equiv=x-ua-compatible content="IE=edge"><meta name=twitter:card content="summary"><meta name=twitter:title content="Guardians of the GitHub master"><meta name=twitter:description content><meta name=twitter:site content="https://twitter.com/estahn"><meta name=twitter:creator content="https://twitter.com/estahn"><link rel="shortcut icon" type=image/png href=/favicon.ico><link type=text/css rel=stylesheet href=/css/post.min.86d1effd4c412b85ac13db53a90c473a0f256f789b821e131125c9aa25cb6a6d.css integrity="sha256-htHv/UxBK4WsE9tTqQxHOg8lb3ibgh4TESXJqiXLam0="><link type=text/css rel=stylesheet href=/css/custom.min.e3b0c44298fc1c149afbf4c8996fb92427ae41e4649b934ca495991b7852b855.css integrity="sha256-47DEQpj8HBSa+/TImW+5JCeuQeRkm5NMpJWZG3hSuFU="><script type=application/ld+json>{"@context":"http://schema.org","@type":"WebSite","url":"https:\/\/enricostahn.com\/post\/2016-03-27-guardians-of-the-github-master\/","name":"Guardians of the GitHub master","author":{"@type":"Person","name":"Enrico Stahn"},"description":""}</script><script type=application/javascript>var doNotTrack=!1;doNotTrack||(window.ga=window.ga||function(){(ga.q=ga.q||[]).push(arguments)},ga.l=+new Date,ga("create","UA-416081-1","auto"),ga("send","pageview"))</script><script async src=https://www.google-analytics.com/analytics.js></script></head><body><div class=burger__container><div class=burger aria-controls=navigation aria-label=Menu><div class="burger__meat burger__meat--1"></div><div class="burger__meat burger__meat--2"></div><div class="burger__meat burger__meat--3"></div></div></div><nav class=nav id=navigation><ul class=nav__list><li><a href=/>Home</a></li><li><a href=/post>Posts</a></li></ul></nav><main><div class=flex-wrapper><div class=post__container><div class=post><header class=post__header><h1 id=post__title>Guardians of the GitHub master</h1><time datetime="2016-03-27 00:00:00 +0000 UTC" class=post__date>Mar 27 2016</time></header><article class=post__content><p><strong>TL;DR</strong>: Use GitHub protected branches with required status checks.</p><p>GitHub provides a feature called <em>protected branches</em> to disallow direct commits into certain branches. On top you can define status checks that need to pass before you can merge anything into the protected branch.</p><h2 id=why-is-this-important>Why is this important?<a class=anchor href=#why-is-this-important>#</a></h2><p>It will provide a safety net for your project. I recently suggested a feature in one of the open source projects we’re using. The project maintainer liked the idea and it was fairly simple to implement. He implemented the feature, committed the change and released a new version. Great, but the version was not working. Looking at the CI server made clear that existing tests failed. You could blame the project maintainer for not running the tests, not waiting for the CI server to finish the build or not checking the build results. However, this wouldn’t have changed the end-result or avoid such mistakes in the future. With hindsight, the delivery process was clearly too manual, one might say broken.</p><h2 id=block-all-the-things--automate-everything>Block all the things & automate everything!<a class=anchor href=#block-all-the-things--automate-everything>#</a></h2><p>The first step to fix the process is to enable the branch protection for master (or whatever branch you use as main branch).
<img src=/img/github-protected-branches-config.png alt="GitHub Protected Branches"></p><p>This will stop anyone from committing to master directly. Instead they will need to create a new branch and a pull request. The pull request can then be reviewed, either manually or automatically, preferably both (<a href=https://getpocket.com/a/read/1173023422 target=_blank rel="noreferrer noopener">Giving better code reviews — Medium</a>).</p><h2 id=guardians----check-1-check-2-check-3->Guardians &ndash; Check 1, Check 2, Check 3, &mldr;<a class=anchor href=#guardians----check-1-check-2-check-3->#</a></h2><p>The next step is to decide what checks are required to complete successfully before a pull request can be merged to your main branch.
<img src=/img/github-protected-branches-checks.png alt=github-protected-branches-checks.png></p><p>Pull Requests are a great tool, they can provide an overview on the impact of introduced changes. At <a href=https://www.zanui.com.au/ target=_blank rel="noreferrer noopener">Zanui</a> we&rsquo;re using them for:</p><ul><li>Code Reviews</li><li>Code Coverage Overview (with <a href=https://chrome.google.com/webstore/detail/codecov-extension/keefkhehidemnokodkdkejapdgfjmijf target=_blank rel="noreferrer noopener">Codecov Chrome Extension</a>)</li><li>Status checks, such as<ul><li>Coding Style Checks (automatically fixed via <a href=http://styleci.io target=_blank rel="noreferrer noopener">StyleCI</a>)</li><li>Coding Standard Checks (via <a href=https://codacy.com/ target=_blank rel="noreferrer noopener">Codacy</a>, <a href=https://scrutinizer-ci.com target=_blank rel="noreferrer noopener">Scrutinizer</a> or <a href=https://insight.sensiolabs.com target=_blank rel="noreferrer noopener">SensioLabs Insights</a>)</li><li>Unit and Integration tests (via <a href=https://circleci.com target=_blank rel="noreferrer noopener">CircleCI</a>)</li><li>Code Coverage minimum requirements (via <a href=https://codecov.io target=_blank rel="noreferrer noopener">Codecov</a>)</li></ul></li></ul><p>While this looks like a lot of effort, it’s fairly easy to set up and the return on investment is almost immediate. The need for coding style checks during Code Reviews was eliminated entirely. Thus shifted the focus of code reviews purely to implementation details. Both, the reviewer and coder save time, since nobody needs to either point out or fix issues that can be rectified automatically.</p><p>With code coverage minimum checks we&rsquo;ll make sure the code coverage percentage doesn&rsquo;t drop below a certain threshold. Which means the developer needs to either write tests for his changes or if he&rsquo;s sneaky add more tests somewhere else.</p><h2 id=required-guardians>Required Guardians<a class=anchor href=#required-guardians>#</a></h2><p>You and your team need to decide what can be a deal breaker for a merge and what is optional. At <a href=https://www.zanui.com.au/ target=_blank rel="noreferrer noopener">Zanui</a> we require our style checks to be completed (which works automatically anyways) and our tests to finish successfully. However, we don&rsquo;t require Codacy or Code coverage minimum requirements to be successful. Codacy provides the coder/reviewer with a list of issues on what could be improved, but we didn&rsquo;t find all reported issues make sense. Code coverage minimum requirements were just introduced recently and are in a trial phase so everyone gets used to them.</p><p>Being able to selectively decide what is required provides a lot of flexibility in optimizing your software development process.</p><p>Setting up protected branches and required status checks will force you to wait for successful completion. It eliminates anyone jumping the gun and introducing automatically detectable issues or creating faulty releases.</p><h2 id=resources>Resources<a class=anchor href=#resources>#</a></h2><ul><li><a href=https://github.com/blog/2051-protected-branches-and-required-status-checks target=_blank rel="noreferrer noopener">Protected branches and required status checks</a></li></ul></article><div class=pagination><a class=pagination__item href=https://enricostahn.com/post/2016-03-05-jq-for-php/><span class=pagination__label>Previous Post</span>
<span class=pagination__title>jq for PHP</span></a>
<a class=pagination__item href=https://enricostahn.com/post/kubernetes-secrets-in-plaintext/><span class=pagination__label>Next Post</span>
<span class=pagination__title>Kubernetes Secrets in plain-text</span></a></div><footer class=post__footer><div class=social-icons><a class=social-icons__link title=Twitter href=https://twitter.com/estahn target=_blank rel="me noopener"><div class=social-icons__icon style=background-image:url(https://enricostahn.com/svg/twitter.svg)></div></a><a class=social-icons__link title=GitHub href=https://github.com/estahn target=_blank rel="me noopener"><div class=social-icons__icon style=background-image:url(https://enricostahn.com/svg/github.svg)></div></a><a class=social-icons__link title=Email href=mailto:enrico.stahn@gmail.com target=_blank rel="me noopener"><div class=social-icons__icon style=background-image:url(https://enricostahn.com/svg/email.svg)></div></a><a class=social-icons__link title=LinkedIn href=https://www.linkedin.com/in/enricostahn/ target=_blank rel="me noopener"><div class=social-icons__icon style=background-image:url(https://enricostahn.com/svg/linkedin.svg)></div></a></div><p>Enrico Stahn © 2011 - 2022</p></footer></div></div><div class=toc-container><nav id=TableOfContents><ul><li><a href=#why-is-this-important>Why is this important?</a></li><li><a href=#block-all-the-things--automate-everything>Block all the things & automate everything!</a></li><li><a href=#guardians----check-1-check-2-check-3->Guardians &ndash; Check 1, Check 2, Check 3, &mldr;</a></li><li><a href=#required-guardians>Required Guardians</a></li><li><a href=#resources>Resources</a></li></ul></nav></div></div></main><script src=/js/index.min.301a8b0870381bf76b3b5182e8966d363a0474281183439beb024d8b8228fc66.js integrity="sha256-MBqLCHA4G/drO1GC6JZtNjoEdCgRg0Ob6wJNi4Io/GY=" crossorigin=anonymous></script>
<script src=https://unpkg.com/prismjs@1.20.0/components/prism-core.min.js></script>
<script src=https://unpkg.com/prismjs@1.20.0/plugins/autoloader/prism-autoloader.min.js data-autoloader-path=https://unpkg.com/prismjs@1.20.0/components/></script>
<script src=/js/table-of-contents.js></script></body></html>